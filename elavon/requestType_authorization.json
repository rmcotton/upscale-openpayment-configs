{
  "pattern": "IFRAME",
  "requestType": "AUTHORIZATION",
  "dynamicScript": {
    "jsUrl": "https://demo.convergepay.com/hosted-payments/PayWithConverge.js",
    "html": "<script>\n  \n    \tfunction openLightbox () {\n\t\t\tvar paymentFields = {\n\t\t\t\t\tssl_txn_auth_token: \"${input.responseBody}\"\n\t\t\t};\n\t\t\tvar callback = {\n\t\t\t\tonError: function (error) {\n\t\t\t\t},\n\t\t\t\tonCancelled: function () {\n\t\t\t\t},\n\t\t\t\tonDeclined: function (response) {\n\t\t\t\t   Upscale.payments.verify(response);\n\n\t\t\t\t},\n\t\t\t\tonApproval: function (response) {\n\t\t\t\t\tUpscale.payments.verify(response);\n                }\n\t\t\t};\n\t\t\tPayWithConverge.open(paymentFields, callback);\n\t\t\treturn false;\n    \t}\n\n    </script>\n\n<button onclick=\"return openLightbox();\">Proceed to Payment</button>"
  },
  "remoteApiOutboundMapping": {
    "url": "https://api.demo.convergepay.com/hosted-payments/transaction_token",
    "authenticationIds": [],
    "method": "POST",
    "requestContentType": "application/x-www-form-urlencoded",
    "requestExample": "ssl_pin=O74D6ICFJ4MSC8RPEAQQGVBBUCVWHNWBB52PLOFHXUV58NY5DKK3QHEIKZAN68RU&ssl_transaction_type=ccauthonly&ssl_amount=100&ssl_merchant_id=123&ssl_user_id=webpage",
    "responseExample": "token",
    "requestMappingFields": {
      "mappings": [
        {
          "from": "ssl_merchant_id",
          "to": "008548",
          "fixed": true
        },
        {
          "from": "ssl_transaction_type",
          "to": "ccauthonly",
          "fixed": true
        },
        {
          "from": "ssl_pin",
          "to": "${vars.ssl_pin}",
          "fixed": false
        },
        {
          "from": "ssl_amount",
          "to": "${input.amount}",
          "fixed": false
        },
        {
          "from": "ssl_user_id",
          "to": "webpage",
          "fixed": true
        }
      ]
    },
    "responseMappingFields": {
      "mappings": []
    },
    "responseContentType": "text/plain"
  },
  "verify": {
    "localVerifyMapping": {
      "mappings": [
        {
          "from": "authResult",
          "to": "result",
          "map": {
            "AUTHORIZED": "AUTHORIZED",
            "CANCELLED": "CANCELLED"
          },
          "fixed": false,
          "isCustom": false
        }
      ]
    }
  }
}
